<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>ASB solves Bhaskara</title>
        
		<link rel="stylesheet" type="text/css" href="site.css" />

        <script>
        function solve()
        {
            a = parseFloat(document.getElementById("a").value);
            b = parseFloat(document.getElementById("b").value);
            c = parseFloat(document.getElementById("c").value);
            window.a = a;
            window.b = b;
            window.c = c;
            
            if(a != 0){//Parabola
				delta = b^2 - 4*a*c
				x1 = ((-b + Math.sqrt(delta))/(2*a));
				x2 = ((-b - Math.sqrt(delta))/(2*a));
            
				xv = (-b)/(2*a);
				yv = a*xv*xv+b*xv+c;
            
          
				
				if (navigator.onLine) {
					console.log("Online");
					txt = "<br \>\n"
					txt += "\\\[\\Delta = b^2 - 4ac\\\]"
					txt += "\\\[\\Delta = " + b + "^2 - 4 . " + a + " . " + c + " = " + delta + "\\\]"
					txt += "<br \>\n"
					txt += "\\\[x_1 = \\frac{-b + \\sqrt{&#916}}{2a} = \\frac{" + -b + " + " + Math.sqrt(delta).toPrecision(4) + "}{" + 2*a + "} = " + x1.toPrecision(4) + "\\\]";
					
					txt += "<br \>\n"
					txt += "\\\[x_2 = \\frac{-b - \\sqrt{&#916}}{2a} = \\frac{" + -b + " - " + Math.sqrt(delta).toPrecision(4) + "}{" + 2*a + "} = " + x2.toPrecision(4) + "\\\]";
					
					if(delta<0)
					{
						txt += "<br \>\n"
						txt += "Delta menor que zero (raízes complexas)"
					}
				} else {
					console.log("Offline");
					txt = "<br \>\n"
					txt = "<b> Atenção: conexão com a internet não foi detectada. Conecte-se para melhor visualização.</b>"
					txt += "&#916 = b^2 - 4ac]"
					txt += "&#916 = " + b + "^2 - 4 . " + str_a + " . " + c + " = " + delta
					txt += "<br \>\n"
					txt += "x_1 = [-b + sqrt(&#916)]/(2a) = (" + -b + " + " + Math.sqrt(delta).toPrecision(4) + ")/(" + 2*a + ") = " + x1.toPrecision(4);
					
					txt += "<br \>\n"
					txt += "x_2 = [-b - sqrt(&#916)]/(2a) = (" + -b + " - " + Math.sqrt(delta).toPrecision(4) + ")/(" + 2*a + ") = " + x2.toPrecision(4);
					
					if(delta<0)
					{
						txt += "<br \>\n"
						txt += "Delta menor que zero (raízes complexas)"
					}
				}
            
				document.getElementById("saida").innerHTML = txt;
			
				setMaxX(Math.max(x1*1.5,x2*1.5));
				setMinX(Math.min(x1*1.5,x2*1.5));
				
				if(yv < 0)
				{
					setMaxY(-yv/2);
					setMinY(yv*1.5);
				}else{
					setMaxY(yv*1.5);
					setMinY(-yv/2);
				}
			}else{// Reta
				if(b == 0){
					if(c == 0){document.getElementById("saida").innerHTML = "Isso não faz sentido!\n"}
					else{document.getElementById("saida").innerHTML = "Solução não existe."}
				}else{
					x1 = -c/b;
					setMaxX(x1*1.5);
					setMinX(x1*0.5);
					setMaxY(10);
					setMinY(-10);
					txt = "Primeiro grau\n"
					document.getElementById("saida").innerHTML = txt;
				}
			}
			
            // Desenha o gráfico
            MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
            Draw(a, b, c);
        }
        </script>
    </head>
    <body onload="javascript:solve()">
		<div id ="all">
        <div id="eq">
        <input type="text" style="width:50px" id="a" value=0 onkeydown="javscript:solve()" onkeyup="javscript:solve()"></input> x² + 
        <input type="text" style="width:50px" id="b" value=1 onkeydown="javscript:solve()" onkeyup="javscript:solve()"></input> x + 
        <input type="text" style="width:50px" id="c" value=-4 onkeydown="javscript:solve()" onkeyup="javscript:solve()"></input> = 0
        <div id="saida"> a</div>
        </div>
        <canvas id="xy-graph" width=100%></canvas>
        </div>
        
        <script type="text/javascript" src="canvas-graph.js"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            extensions: ["tex2jax.js"],
            jax: ["input/TeX", "output/HTML-CSS"],
            tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$','$'], ["\\[","\\]"] ],
            processEscapes: true
            },
            TeX: {
            extensions: ["AMSmath.js", "AMSsymbols.js"]
            },
            "HTML-CSS": { availableFonts: ["TeX"] }
        });
        </script>
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
    </body>
</html>
